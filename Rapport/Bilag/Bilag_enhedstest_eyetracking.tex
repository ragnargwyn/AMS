%\include{preamble_eyerobot}
%\begin{document}

\chapter{Enhedstest af Øjendetekteringsmodul}
\label{appendix:Bilag_enhedstest_eyetracking}

Øjendetekteringsmodulet er blevet enhedstestet, for at sikre, at performance lever op til kravet om at køre i realtid. 
Modulet er testet på tre områder:

\begin{itemize}
	\item Hastighed: Hvor mange frames pr. sekund (fps) kan modulet behandle
	\item Robusthed: Hvor mange resultater bliver beregnet i forhold til antal fps
	\item Pålidelighed: Hvor stor en del af resultaterne er korrekte
\end{itemize}

Der er ikke testet for robusthed under varierende lysforhold.
Dette er fordi denne udgave af softwaren ikke kan håndtere lysændringer godt nok til, at en sådan test vil give brugbar information. \\
Informationen om fps er beregnet på baggrund af eksekveringshastighed optaget med C++11-biblioteket: Chrono. 
Der er ved alle tests brugt .mp4-format-videoer, hvor 100 frames behandles. \\
Til test af pålidelighed er der anvendt videoer, hvor brugeren kun kigger i én retning, således at der kan testes, hvor mange behandlingsresultater, der er korrekte.\\
Testen af robusthed er foretaget med realtidsvideo fra et webcam.


\begin{table}[H]
	\centering
	\begin{tabu} to 1 \textwidth { X[l,3]  X[l,2] X[l,3]}
		\hline
		\textbf{Test af frame rate}   	& \textbf{FPS} 	&  \textbf{Kommentar} \\
		\hline
		\textbf{EyeCam}   	& 10-12 	&  Gennemsnitligt frame rate uden billedbehandling \\
		\hdashline
		\textbf{EyeCam + EyeTracking}  	& 9-11 	&  Viser at billedbehandlingen ikke ændre på fps \\
		\hline
		\textbf{Test af robusthed} 	& \textbf{Detekteringsrate i procent} 	& \textbf{Kommentar} \\
		\hline
		\textbf{Webcamfeed}  	& 64\%	& Testet uden naturligt lys tilstede \\
		\hline
		
		\textbf{Test af pålidelighed}  	& \textbf{Antal korrekte frames i procent}	& \textbf{Kommentar} \\
		\hline
		\textbf{Videofeed center}  	&  78\%   	&  78 af 100 frames var korrekte \\
		\hdashline
		\textbf{Videofeed up}   	&  98\%    	&  Ses at dette resultat er på bekostning af center og down \\
		\hdashline
		\textbf{Videofeed down}   	& 77\%  	&  Svært at detektere, da øjet er meget lukket, når der kigges ned \\
		\hdashline
		\textbf{Videofeed left} 	&  99\% 	&  Ses at dette resultat er på bekostning af center og right \\
		\hdashline	
		\textbf{Videofeed right} & 62\% &  Ses at dette resultat er på bekostning af center og left \\ \hline
	\end{tabu}
	\caption{Enhedstest af øjendetekteringsmodul}
	\label{Enhedstest_oejendetekteringsmodul}
\end{table}


\subsubsection{Delkonklusion}
Øjendetektionsmodulets ansvarsområder er at detektere og kalkulere brugerens synsretning, for at omsætte dette til styringskoordinater til robotten. 
Funktionaliteten til at opnå dette er blevet implementeret.\\ 
Modulet har sorteringsmetoder til at håndtere flere ansigter, øjne og iriser i samme frame. 
Der er også integreret en simpel lysintensitetskalibrering.

Det kan konkluderes ud fra enhedstesten, at modulet har en virkningsgrad god nok til proof of concept, men ikke robusthed eller pålidelighed nok til praktisk brug.  

%\end{document}
